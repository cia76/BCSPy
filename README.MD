# BCSPy
Библиотека-обертка, которая позволяет работать с функционалом [БКС Торговое API](https://trade-api.bcs.ru/) брокера [БКС](https://bcs.ru/) из Python.

### Что такое библиотека-обертка?
Компактная библиотека, содержащая только самый необходимый код для работы с API брокера из Python:
- Подключение к API. Отслеживание корректности подключения (обновление токенов, переподключение)
- Выполнение запросов и получение ответов от API
- Механизмы подписок, отмены подписок. Получение и разбор данных подписок
- Конвертация типов данных брокера в типы данных Python и обратно. Например, цена, лоты/штуки, дата/время
- Конвертация типов данных брокера в универсальные типы и обратно. Например, название тикера, режимы торгов, временнОй интервал
- Ведение лога отправляемых и получаемых данных от API

### Назначение
 - Создание автоматических торговых систем любой сложности
 - Написание дополнений к системам Технического Анализа
 - Тестирование торговых систем и автоматическая торговля в [BackTrader](https://www.backtrader.com/) через [систему "Финансовая Лаборатория"](https://github.com/cia76/FinLabPy).

### Особенности
- Каждая подписка рыночных данных: котировки, последняя свеча, стакан, обезличенные сделки запускается в отдельном соединении
- Невозможно синхронизировать локальное время с сервером брокера
- В БКС Торговое API нет стоп заявок
- В БКС Торговое API можно подписываться только на свечи от 1 до 60 минут. Подписаться на свечи более 60 минут нельзя
- При подписке на новые свечи текущая свеча будет приходить каждый раз, когда цена изменилась, а не тогда, когда она полностью сформирована
- Свечи приходят с временем закрытия, а не с временем открытия

### Установка
Установите библиотеку через pip в командной строке: **pip install git+https://github.com/cia76/BCSPy.git** 

### Начало работы
Если нет торгового токена, то получите его [здесь >>>](https://bcs.ru/open-account)

Вызовите библиотеку из Python с новым токеном: bp_provider = BCSPy('<Токен>'). Токен сохранится в защищенном системном хранилище. Далее можно вызывать библиотеку без токена: bp_provider = BCSPy()

В папке **Examples** находится хорошо документированный код примеров. С них лучше начать разбираться с библиотекой.

- **Connect.py** - Подключение к БКС Торговое API. Проверка работы запрос/ответ: Время на сервере. Проверка работы подписок: Подписка минутные бары тикера.
- Скоро будет **Accounts.py** - Получение позиций, свободных средств, активных заявок (лимитные и стоп) для каждого счета.
- **Ticker.py** - Информация о различных тикерах.
- Скоро будет **Bars.py** - Получение дневных свечек с начала истории.
- Скоро будет **Stream.py** - Подписка на котировки, стакан, последние сделки.
- Скоро будет **Transactions.py** - Получение цены из последней котировки. Выставление рыночных заявок на покупку и продажу. Выставление и отмена лимитной заявки. Выставление и отмена стоп заявки.

### Авторство, право использования, развитие
Автор библиотеки Чечет Игорь Александрович. Библиотека написана в рамках проекта [Финансовая Лаборатория](https://finlab.vip/).

Библиотека предоставляется бесплатно в исходном коде, с подробными комментариями и видеоразборами. При распространении ссылка на автора и проект обязательны.

Исправление ошибок, доработка и развитие библиотеки осуществляется автором и сообществом частных алготрейдеров проекта [Финансовая Лаборатория](https://finlab.vip/).

### Что дальше
- Бесплатный курс "Автоторговля" по идеям, концепциям и процессам алгоритмической/автоматической торговли [смотрите здесь >>>](https://finlab.vip/wpm-category/autotrading2021/)


- Бесплатный курс "BackTrader: Быстрый старт" [ждет вас здесь >>>](https://finlab.vip/wpm-category/btquickstart/)


- [Подписывайтесь на Telegram канал "Финансовой Лаборатории",](https://t.me/finlabvip) чтобы быть в курсе всех новинок алгоритмической и автоматической торговли.
